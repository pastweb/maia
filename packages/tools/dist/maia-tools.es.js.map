{"version":3,"file":"maia-tools.es.js","sources":["../src/EventEmitter/EventEmitter.ts","../src/noop/index.ts","../src/App/App.ts","../src/getType/getType.ts","../src/classNames/classNames.ts","../src/debounce/debounce.ts","../src/isSSR/index.ts","../src/isType/isType.ts","../src/isObject/isObject.ts","../src/getFromBreakPoints/getFromBreakPoints.ts","../src/getFullElementSize/getFullElementSize.ts","../src/getObjectValue/getObjectValue.ts","../src/hashID/hashID.ts","../src/isMap/isMap.ts","../src/isMobile/isMobile.ts","../src/isSet/isSet.ts","../src/isSymbol/isSymbol.ts","../src/mergObjects/mergeObjects.ts","../src/throttle/throttle.ts","../src/portal/util.ts","../src/portal/portal.ts","../src/portal/createPortal.ts","../src/ScrollbarsHandler/ScrollbarsHandler.js"],"sourcesContent":["import { EventCallback, EmitterSubscribeObject } from './types';\n\nconst events = Symbol();\nconst keys = Symbol();\nconst unsubscribe = Symbol();\n\nexport class EventEmitter {\n  constructor () {\n    (this as any)[events] = {};\n    (this as any)[keys] = {};\n    (this as any)[unsubscribe] = this[unsubscribe].bind(this);\n    this.emit = this.emit.bind(this);\n    this.on = this.on.bind(this);\n    this.removeListener = this.removeListener.bind(this);\n  }\n\n  emit (eventName: string, ...args: any[]): void {\n    if ((this as any )[events][eventName]) {\n      const callBackCache = new Set();\n      \n      (this as any)[events][eventName].forEach((eventCallback: EventCallback) => {\n        if (!callBackCache.has(eventCallback)) {\n          callBackCache.add(eventCallback);\n          eventCallback(...args);\n        }\n      });\n    }\n  }\n\n  on (eventName: string, eventCallback: EventCallback): EmitterSubscribeObject {\n    if (!(this as any)[events][eventName]) {\n      (this as any)[events][eventName] = new Map();\n    }\n\n    const eventCallbackKey = Symbol();\n    (this as any)[events][eventName].set(eventCallbackKey, eventCallback);\n    (this as any)[keys][eventCallbackKey] = eventName;\n\n    return {\n      eventCallbackKey,\n      removeListener: () => this[unsubscribe](eventName, eventCallbackKey),\n    };\n  }\n\n  removeListener (eventCallbackKey: symbol): void {\n    const event = (this as any)[keys][eventCallbackKey];\n    if (event) {\n      this[unsubscribe](event, eventCallbackKey);\n    }\n  }\n\n  [unsubscribe] (eventName: string, eventCallbackKey: symbol): void {\n    (this as any)[events][eventName].delete(eventCallbackKey);\n    delete (this as any)[keys][eventCallbackKey];\n  }\n}\n","export function noop () {}\n","import { EventEmitter, EventCallback } from '../EventEmitter';\nimport { noop } from '../noop';\nimport { AppOptions, PrivateKeys } from './types';\n\nconst emitter = Symbol();\nconst keys = Symbol();\n\nexport class App {\n  domElement: HTMLElement | undefined;\n  options: AppOptions | undefined;\n  on: (eventName: string, eventCallback: EventCallback) => void;\n  emit: (eventName: string, ...args: any[]) => void;\n  removeListener: (eventCallbackKey: symbol) => void;\n\n  constructor (options: AppOptions = {}, domElement?: HTMLElement, privateKeys: PrivateKeys = {}) {\n    const { optionsKey, domElementKey } = privateKeys;\n    (this as any)[keys] = privateKeys;\n    (this as any)[emitter] = new EventEmitter();\n\n    if (domElementKey) {\n      (this as any)[domElementKey] = domElement;\n    } else {\n      this.domElement = domElement;\n    }\n\n    if (optionsKey) {\n      (this as any)[optionsKey] = options;\n    } else {\n      this.options = options;\n    }\n    \n    this.on = (this as any)[emitter].on;\n    this.emit = (this as any)[emitter].emit;\n    this.removeListener = (this as any)[emitter].removeListener;\n\n    if ((this as any).mount && typeof (this as any).mount === 'function') {\n      (this as any).mount = (this as any).mount.bind(this);\n    } else {\n      (this as any).mount = noop;\n    }\n\n    if ((this as any).unmount && typeof (this as any).unmount === 'function') {\n      (this as any).unmount = (this as any).unmount.bind(this);\n    } else {\n      (this as any).unmount = noop;\n    }\n\n    if ((this as any).update && typeof (this as any).update === 'function') {\n      (this as any).update = (this as any).update.bind(this);\n    } else {\n      (this as any).update = noop;\n    }\n  }\n\n  public setDomElement (domElement: HTMLElement, domElementKey?: symbol): void {\n    if (domElementKey) {\n      (this as any)[domElementKey] = domElement;\n    } else if ((this as any)[keys].domElementKey) {\n      (this as any)[keys].domElementKey = domElement;\n    } else {\n      this.domElement = domElement;\n    }\n  }\n  \n  public setOptions (options: AppOptions, optionsKey?: symbol): void {\n    if (optionsKey) {\n      (this as any)[optionsKey] = options;\n    } else if ((this as any)[keys].optionsKey) {\n      (this as any)[(this as any)[keys].optionsKey] = options;\n    } else {\n      this.options = options;\n    }\n  }\n}\n","/**\n * get target Type.\n * @param target\n * @returns {string}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getType (target: any): string {\n  return Object.prototype.toString.call(target).slice(8, -1);\n}\n","// inspirated to https://github.com/JedWatson/classnames#readme\nimport { getType } from '../getType';\n\nconst types: { [key: string]: any } = {\n  Number: (arg: number): string => `${arg}`,\n  String: (arg: string): string => `${arg}`,\n  Object: (arg: { [key: string]: any }): string => fromObject(arg),\n  Array: (arg: any[]): string => fromArray(arg),\n};\n\nfunction addSpace (i: number): string {\n  return i > 0 ? ' ' : '';\n}\n\nfunction fromObject (obj: { [key: string]: any }): string {\n  return Object.keys(obj).reduce((classes, className, i) => {\n    if (!obj[className]) return classes;\n\n    return `${classes}${addSpace(i)}${className}`;\n  }, '');\n}\n\nfunction fromArray (arr: any[]): string {\n  let classString = null;\n\n  return arr.reduce((classes, el, i) => {\n    const type: string = getType(el);\n\n    if (!types[type]) return classes;\n    classString = types[type](el);\n    if (!classString) return classes;\n\n    return `${classes}${addSpace(i)}${classString}`;\n  }, '');\n}\n\nexport function classNames (...args: any[]): string {\n  return fromArray(args);\n}\n","export type DebouceCallback = (...args: any[]) => any;\n\nexport function debounce (fn: DebouceCallback, timeout = 300): DebouceCallback {\n  let timer : any;\n\n  return (...args: any[]) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => { fn.apply(this, args); }, timeout);\n  };\n}\n","export const isSSR: boolean = typeof window === 'undefined';\n","import { getType } from '../getType';\n\n/**\n * Type check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isType (type: string, target: any): boolean {\n  return target !== undefined && target !== null && getType(target) === type;\n}\n","import { isType } from '../isType';\n\n/**\n * Simple object check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isObject (target: any): boolean {\n  return isType('Object', target);\n}\n","import { isSSR } from '../isSSR';\nimport { isObject } from '../isObject';\nimport { BreakPointsConfig } from './types';\n\n/**\n * Given a config Object like:\n * const breaks = {\n *      0: 'phone',\n *      450: 'tablet',\n *      1025: 'desktop'\n *  }\n * @return {false|Any} break value.\n */\n\nexport function getFromBreakPoints(breaks: BreakPointsConfig): boolean | any {\n  if (isSSR) return false;\n  if (!isObject(breaks)) return false;\n\n  const sorted = Object.keys(breaks)\n    .map((_break: string) => parseFloat(_break))\n    .sort((a, b) => a - b);\n\n  const _break: number = sorted.find((_break: number) => _break >= window.innerWidth) || sorted[sorted.length - 1 ];\n  return breaks[_break];\n}\n","import { isSSR } from '../isSSR';\nimport { FullElementSize } from './types';\n\nconst attrs = {\n  width: ['width', 'borderLeftWidth', 'marginLeft', 'marginRight', 'borderRightWidth'],\n  height: ['height', 'borderTopWidth', 'marginTop', 'marginBottom', 'borderBottomWidth']\n};\n\nconst empty: FullElementSize = { width: 0, height: 0 };\n\nexport function getFullElementSize(element: HTMLElement | null | undefined): FullElementSize {\n  if (!element) return empty;\n  if (isSSR) return empty;\n\n  const cs = window.getComputedStyle(element);\n  const sizes: FullElementSize = { ...empty };\n\n  Object.entries(attrs).forEach(([dim, attrs]) => {\n    (sizes as any)[dim] = attrs.map(attr => parseFloat((cs as any)[attr]) || 0).reduce((acc, curr) => acc + curr);\n  });\n\n  return sizes;\n}\n","// inspirated to lodash.get\nimport { isObject } from '../isObject';\nimport { ObjectValue, DefaultValue } from './types';\n\nexport function getObjectValue (target: ObjectValue, path: string | string[], defaultValue: DefaultValue = null): any {\n  if (!isObject(target)) {\n    return defaultValue;\n  }\n\n  if (!Array.isArray(path) && typeof path !== 'string') {\n    return defaultValue;\n  }\n\n  let pathArray = [];\n\n  if (!Array.isArray(path)) {\n    let newKey = '';\n    let currChar = '';\n    for(let i=path.length -1; i>=0; i--) {\n      currChar = path.charAt(i);\n      \n      if (currChar !== '.') {\n        newKey = `${currChar}${newKey}`;\n        if (i === 0) pathArray.push(newKey);\n      } else {\n        pathArray.push(newKey);\n        newKey = '';\n      }\n    }\n  } else {\n    pathArray = path;\n  }\n\n  const key = pathArray.pop();\n\n  if (typeof key !== 'string') {\n    return defaultValue;\n  }\n\n  if (!pathArray.length && target[key]) {\n    return target[key];\n  }\n\n  if (target[key] && isObject(target[key])) {\n    return getObjectValue(target[key], pathArray, defaultValue);\n  }\n\n  return defaultValue;\n}\n","/**\n * The default alphabet is 62 numbers and lower and uppe case letters and numbers.\n * Any numbers that look like letters and vice versa are removed:\n * 1 l, 0 o.\n * Also the following letters are not present, to prevent any\n * expletives: cfhistu\n */\nconst ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\nconst ALPHABET_LENGTH = ALPHABET.length;\n\n// Governs the length of the ID.\n// With an alphabet of 62 chars,\n// a length of 8 gives us 62^8 or\n// 218,340,105,584,896 possibilities.\n// Should be enough...\nconst ID_LENGTH = 8;\n\n/**\n * Governs the number of times we should try to find\n * a unique value before giving up.\n * @type {Number}\n */\nconst UNIQUE_RETRIES = 9999;\n\n/**\n * Returns a randomly-generated friendly ID.\n * Note that the friendly ID is not guaranteed to be\n * unique to any other ID generated by this same method,\n * so it is up to you to check for uniqueness.\n * @return {String} friendly ID.\n */\nfunction generate(prefix?: string, idLength?: number): string {\n  const lengthId = idLength || ID_LENGTH;\n  let key = prefix || '';\n  for (let i = 0; i < lengthId; i++) {\n    key = `${key}${ALPHABET.charAt(Math.floor(Math.random() * ALPHABET_LENGTH))}`;\n  }\n  return key;\n};\n\n/**\n * Tries to generate a unique ID that is not defined in the\n * `cache` array.\n * @param  {Array} cache The list of previous ids to avoid.\n * @return {String} A unique ID, or `null` if one could not be generated.\n */\nfunction generateUnique(cache: string[], prefix?: string, idLength?: number, retries?: number): string {\n  const cacheSet = new Set(cache) || new Set();\n  let id = '';\n  const uniqueReties = retries || UNIQUE_RETRIES;\n\n  // Try to generate a unique ID,\n  // i.e. one that isn't in the cache.\n\n  for (let _retries = 0; _retries < uniqueReties; _retries++) {\n    id = generate(prefix, idLength);\n    \n    if (!cacheSet.has(id)) break;\n\n    if (_retries === uniqueReties) {\n      console.error(`tried ${_retries} times to find a unique ID.`);\n    }\n  }\n\n  return id;\n};\n\nexport const hashID = {\n  generate,\n  generateUnique,\n};\n","import { isType } from '../isType';\n\n/**\n * Simple Map check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isMap (target: any): boolean {\n  return isType('Map', target);\n}\n","import { isSSR } from '../isSSR';\nimport { IisMobile } from './types';\n\nexport const uaRegex = /iP(hone|ad|od)|blackberry|Android|(W|w)indows (P|p)hone/g;\n\nfunction checkWithMediaQuery(mql: MediaQueryListEvent | MediaQueryList): boolean {\n  const { matches } = mql;\n  return uaRegex.test(window.navigator.userAgent) || matches ? true : false;\n}\n\nexport function isMobile(params: IisMobile = {}): boolean {\n  const { isMobile, mediaQueryString, onMediaQueryChange } = params;\n  if (typeof isMobile !== 'undefined') return isMobile;\n  if (isSSR) return false;\n\n  if (!mediaQueryString) {\n    return uaRegex.test(window.navigator.userAgent);\n  }\n\n  function _onMediaQueryChange(event: MediaQueryListEvent): void {\n    const isMobile = checkWithMediaQuery(event);\n\n    if (onMediaQueryChange) {\n      onMediaQueryChange({...event, isMobile });\n    }\n  }\n\n  const mql: MediaQueryList = window.matchMedia(mediaQueryString);\n\n  if (onMediaQueryChange) {\n    mql.addEventListener('change', _onMediaQueryChange);\n  }\n\n  return checkWithMediaQuery(mql);\n}\n","import { isType } from '../isType';\n\n/**\n * Simple Set check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isSet (target: any): boolean {\n  return isType('Set', target);\n}\n","import { isType } from '../isType';\n\n/**\n * Simple Symbol check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isSymbol (target: any): boolean {\n  return isType('Symbol', target);\n}\n","import { isObject } from '../isObject';\n/**\n * Deep merge two or more objects.\n * @param target\n * @param ...sources\n */\n\nexport function mergeObjects(...sources: { [key: string]: any }[]): { [key: string]: any } {\n  if (!sources.length) return {};\n  return sources.reduce((acc, curr) => {\n    if (isObject(curr)) {\n      Object.keys(curr).forEach(key => {\n        const accVal = acc[key];\n        const currVal = curr[key];\n        \n        if (Array.isArray(accVal) && Array.isArray(currVal)) {\n          acc[key] = accVal.concat(...currVal);\n        }\n        else if (isObject(accVal) && isObject(currVal)) {\n          acc[key] = mergeObjects(accVal, currVal);\n        }\n        else {\n          acc[key] = currVal;\n        }\n      });\n    }\n    \n    return acc;\n  }, {});\n}\n","export type ThrottleCallback = (...args: any[]) => any;\n\nexport function throttle (fn: ThrottleCallback, timeout = 300): ThrottleCallback {\n  let inThrottle: boolean;\n\n  return (...args) => {\n    if (inThrottle) return;\n\n    fn.apply(this, args);\n    inThrottle = true;\n    setTimeout(() => { inThrottle = false; }, timeout);\n  };\n}\n","import { hashID } from '../hashID';\nimport {\n  Portals,\n  OpenPortalConfig,\n  UpdatePortalConfig,\n  ClosePortalConfig,\n  HTMLElementAttrs,\n  StyleConfig\n} from './types';\nimport { App } from '../App';\n\nexport function setElementAttributes (element: HTMLElement | null, attrs: HTMLElementAttrs): void {\n  if (!element) return;\n  Object.entries(attrs).forEach(([attr, value]: [string, string | StyleConfig]) => {\n    if (attr === 'style') {\n      Object.entries(value).forEach(([prop, value]: [string, string]) => {\n        (element.style as any)[prop] = `${value}`;\n      });\n    } else {\n      (element as any)[attr] = `${value}`;\n    }\n  });\n}\n\nexport function open (portals: Portals, { portalId, tagName = 'div', tagAttrs, app = {} }: OpenPortalConfig): string | false {\n  const portal = document.getElementById(portalId);\n  \n  if (!portal) return false;\n  \n  const appElement = document.createElement(tagName);\n  \n  if (tagAttrs) setElementAttributes(appElement, tagAttrs);\n  if (!portals[portalId]) portals[portalId] = {};\n  \n  const appId = hashID.generateUnique(Object.keys(portals[portalId]));\n  appElement.id = appId;\n  portal.appendChild(appElement);\n  \n  const {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    AppClass = class { mount(){} },\n    options = {},\n    privateKeys = {},\n  } = app;\n\n  const appInstance = new AppClass({ portalId, appId, ...options }, appElement, privateKeys);\n  portals[portalId][appId] = appInstance;\n  appInstance.mount();\n  \n  return appId;\n}\n\nexport function update (portals: Portals, { portalId, appId, tagAttrs, appData }: UpdatePortalConfig): boolean {\n  if (!portals[portalId] || (appId !== '*' && !portals[portalId][appId])) return false;\n\n  if (tagAttrs) setElementAttributes(document.getElementById(appId), tagAttrs);\n  \n  if (appData) {\n    if (appId === '*') {\n      Object.values(portals[portalId]).forEach((app: App) => (app as any).update(appData));\n    } else {\n      (portals[portalId][appId] as any).update(appData);\n    }\n  }\n\n  return true;\n}\n\nexport function close (portals: Portals, { portalId, appId }: ClosePortalConfig): boolean {\n  if (!portals[portalId] || (appId !== '*' && !portals[portalId][appId])) return false;\n  \n  function closeIt ({ portalId, appId }: ClosePortalConfig) {\n    (portals[portalId][appId] as any).unmount();\n    delete portals[portalId][appId];\n    const element: HTMLElement | null = document.getElementById(appId);\n    if (element) {\n      element.remove();\n    }\n    return true;\n  }\n  \n  if (appId === '*') {\n    Object.keys(portals[portalId]).forEach(appId => portals[portalId][appId].emit('mustUnmount'));\n  }\n\n  return closeIt({ portalId, appId });\n}\n","import { open, close, update } from './util';\nimport { Portal, Portals, OpenPortalConfig, UpdatePortalConfig, ClosePortalConfig } from './types';\n\nexport const portals: Portals = {};\n\nexport const portal: Portal = {\n  open: (portalConfig: OpenPortalConfig): string | false => open(portals, portalConfig),\n  update: (portalConfig: UpdatePortalConfig): boolean => update(portals, portalConfig),\n  close: (portalConfig: ClosePortalConfig): boolean => close(portals, portalConfig),\n};\n","import { portal } from './portal';\nimport { CreatedPortal, CreatePortalConfig, HTMLElementAttrs } from './types';\n\nexport function createPortal ({ portalId, tagName, tagAttrs, app = {} }: CreatePortalConfig): CreatedPortal {\n  app.options = app.options || {};\n  return {\n    open: (component: any, initData?: { [key: string]: any }): string | false => portal.open({\n        portalId,\n        tagName,\n        tagAttrs,\n        app: {\n          ...app,\n          options: {\n            ...app.options,\n            portal,\n            component,\n            initData,\n          },\n        }\n    }),\n    update: (appId: string, appData?: any, tagAttrs?: HTMLElementAttrs): boolean => {\n      return portal.update({ portalId, appId, appData, tagAttrs });\n    },\n    close: (appId: string): boolean => portal.close({ portalId, appId }),\n  };\n}\n","// inspirated to https://github.com/Grsmto/simplebar\n\nfunction calcScrollbarWidth() {\n  if (!document) return 0;\n  const body = document.body;\n  const box = document.createElement('div');\n  const boxStyle = box.style;\n\n  boxStyle.position = 'absolute';\n  boxStyle.top = boxStyle.left = '-9999px';\n  boxStyle.width = boxStyle.height = '100px';\n  boxStyle.overflow = 'scroll';\n\n  body.appendChild(box);\n  const width = box.offsetWidth - box.clientWidth;\n  body.removeChild(box);\n  return width;\n};\n\nconst DEFAULT_OPTIONS = {\n  autoHide: true,\n  show: 'both',\n  forceVisible: false,\n  scrollbarMinSize: 25,\n  scrollbarMaxSize: 0,\n  direction: 'ltr',\n  timeout: 1000,\n  visibleClass: 'visible'\n};\n\nexport class ScrollbarsHandler {\n  constructor (elements, options) {\n    this.setOptions = this.setOptions.bind(this);\n    this.init = this.init.bind(this);\n    this.initListeners = this.initListeners.bind(this);\n    this.recalculate = this.recalculate.bind(this);\n    this.render = this.render.bind(this);\n    this.resizeScrollbar = this.resizeScrollbar.bind(this);\n    this.positionScrollbar = this.positionScrollbar.bind(this);\n    this.toggleTrackVisibility = this.toggleTrackVisibility.bind(this);\n    this.hideNativeScrollbar = this.hideNativeScrollbar.bind(this);\n    this.onScrollX = this.onScrollX.bind(this);\n    this.onScrollY = this.onScrollY.bind(this);\n    this.scrollX = this.scrollX.bind(this);\n    this.scrollY = this.scrollY.bind(this);\n    this.onMouseEnter = this.onMouseEnter.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.showScrollbar = this.showScrollbar.bind(this);\n    this.hideScrollbars = this.hideScrollbars.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onDrag = this.onDrag.bind(this);\n    this.drag = this.drag.bind(this);\n    this.onEndDrag = this.onEndDrag.bind(this);\n    this.isWithinBounds = this.isWithinBounds.bind(this);\n\n    const {\n      scrollbars,\n      scrollContent,\n      content,\n      trackY,\n      scrollbarY,\n      trackX,\n      scrollbarX\n    } = elements;\n\n    this.el = scrollbars;\n    this.contentEl = content;\n    this.scrollContentEl = scrollContent;\n    this.trackX = trackX;\n    this.scrollbarX = scrollbarX;\n    this.trackY = trackY;\n    this.scrollbarY = scrollbarY;\n\n    this.flashTimeout = null;\n    this.dragOffset = { x: 0, y: 0 };\n    this.isEnabled = { x: true, y: true };\n    this.isVisible = { x: false, y: false };\n    this.scrollOffsetAttr = { x: 'scrollLeft', y: 'scrollTop' };\n    this.sizeAttr = { x: 'offsetWidth', y: 'offsetHeight' };\n    this.scrollSizeAttr = { x: 'scrollWidth', y: 'scrollHeight' };\n    this.offsetAttr = { x: 'left', y: 'top' };\n    this.handleSize = { x: 0, y: 0 };\n\n    this.currentAxis = null;\n    this.scrollbarWidth = null;\n    this.options = { ...DEFAULT_OPTIONS, options };\n    this.isRtl = this.options.direction === 'rtl';\n    this.offsetSize = 20;\n\n    this.contentElWidth = null;\n    this.contentElHeight = null;\n\n    this.init();\n  }\n\n  setOptions (options) {\n    this.options = Object.assign(this.options, options);\n    this.recalculate();\n  }\n\n  init () {\n    // We stop here on server-side\n    if (window) {\n      // Calculate content size\n      this.hideNativeScrollbar();\n      this.render();\n      this.recalculate();\n      this.initListeners();\n    }\n  }\n\n  initListeners () {\n    // Event listeners\n    if (this.options.autoHide) {\n      this.el.addEventListener('mouseenter', this.onMouseEnter);\n    }\n\n    this.el.addEventListener('mousedown', this.onMouseDown);\n    this.el.addEventListener('mousemove', this.onMouseMove);\n\n    this.contentEl.addEventListener('scroll', this.onScrollX);\n    this.scrollContentEl.addEventListener('scroll', this.onScrollY);\n\n    // Browser zoom triggers a window resize\n    // window.addEventListener('resize', this.onWindowResize);\n  }\n\n  /**\n     * Recalculate scrollbar\n     */\n  recalculate () { this.render(); }\n\n  render () {\n    this.contentSizeX = this.contentEl[this.scrollSizeAttr.x];\n    this.contentSizeY = this.contentEl[this.scrollSizeAttr.y] - (this.scrollbarWidth || this.offsetSize);\n    this.trackXSize = this.trackX[this.sizeAttr.x];\n    this.trackYSize = this.trackY[this.sizeAttr.y];\n\n    // Set isEnabled to false if scrollbar is not necessary (content is shorter than wrapper)\n    this.isEnabled.x = this.trackXSize < this.contentSizeX;\n    this.isEnabled.y = this.trackYSize < this.contentSizeY;\n\n    this.resizeScrollbar('x');\n    this.resizeScrollbar('y');\n\n    this.positionScrollbar('x');\n    this.positionScrollbar('y');\n\n    this.toggleTrackVisibility('x');\n    this.toggleTrackVisibility('y');\n  }\n\n  /**\n     * Resize scrollbar\n     */\n  resizeScrollbar (axis = 'y') {\n    let scrollbar;\n    let contentSize;\n    let trackSize;\n\n    if (!this.isEnabled[axis] && !this.options.forceVisible) return;\n\n    if (axis === 'x') {\n      scrollbar = this.scrollbarX;\n      contentSize = this.contentSizeX;\n      trackSize = this.trackXSize;\n    } else {\n      // 'y'\n      scrollbar = this.scrollbarY;\n      contentSize = this.contentSizeY;\n      trackSize = this.trackYSize;\n    }\n\n    const scrollbarRatio = trackSize / contentSize;\n\n    // Calculate new height/position of drag handle.\n    this.handleSize[axis] = Math.max(\n      (scrollbarRatio * trackSize),\n      this.options.scrollbarMinSize\n    );\n\n    if (this.options.scrollbarMaxSize) {\n      this.handleSize[axis] = Math.min(\n        this.handleSize[axis],\n        this.options.scrollbarMaxSize\n      );\n    }\n\n    if (axis === 'x') {\n      scrollbar.style.width = `${this.handleSize[axis]}px`;\n    } else {\n      scrollbar.style.height = `${this.handleSize[axis]}px`;\n    }\n  }\n\n  positionScrollbar (axis = 'y') {\n    let scrollbar;\n    let scrollOffset;\n    let contentSize;\n    let trackSize;\n\n    if (axis === 'x') {\n      scrollbar = this.scrollbarX;\n      scrollOffset = this.contentEl[this.scrollOffsetAttr[axis]]; // Either scrollTop() or scrollLeft().\n      contentSize = this.contentSizeX;\n      trackSize = this.trackXSize;\n    } else {\n      // 'y'\n      scrollbar = this.scrollbarY;\n      scrollOffset = this.scrollContentEl[this.scrollOffsetAttr[axis]]; // Either scrollTop() or scrollLeft().\n      contentSize = this.contentSizeY;\n      trackSize = this.trackYSize;\n    }\n\n    const scrollPourcent = scrollOffset / (contentSize - trackSize);\n    const handleOffset = ((trackSize - this.handleSize[axis]) * scrollPourcent);\n\n    if (this.isEnabled[axis] || this.options.forceVisible) {\n      if (axis === 'x') {\n        scrollbar.style.transform = `translate3d(${handleOffset}px, 0, 0)`;\n      } else {\n        scrollbar.style.transform = `translate3d(0, ${handleOffset}px, 0)`;\n      }\n    }\n  }\n\n  toggleTrackVisibility (axis = 'y') {\n    const track = axis === 'y' ? this.trackY : this.trackX;\n    const scrollbar = axis === 'y' ? this.scrollbarY : this.scrollbarX;\n\n    if (this.isEnabled[axis] || this.options.forceVisible) {\n      track.style.visibility = 'visible';\n    } else {\n      track.style.visibility = 'hidden';\n    }\n\n    // Even if forceVisible is enabled, scrollbar itself should be hidden\n    if (this.options.forceVisible) {\n      if (this.isEnabled[axis]) {\n        scrollbar.style.visibility = 'visible';\n      } else {\n        scrollbar.style.visibility = 'hidden';\n      }\n    }\n  }\n\n  hideNativeScrollbar () {\n    // Recalculate scrollbarWidth in case it's a zoom\n    this.scrollbarWidth = calcScrollbarWidth();\n\n    this.scrollContentEl.style[this.isRtl ? 'paddingLeft' : 'paddingRight'] = `${this.scrollbarWidth || this.offsetSize}px`;\n    this.scrollContentEl.style.marginBottom = `-${this.scrollbarWidth * 2 || this.offsetSize}px`;\n    // this.contentEl.style.paddingBottom = `${this.scrollbarWidth || this.offsetSize}px`\n\n    if (this.scrollbarWidth !== 0) {\n      this.contentEl.style[this.isRtl ? 'marginLeft' : 'marginRight'] = `-${this.scrollbarWidth}px`;\n    }\n  }\n\n  /**\n     * On scroll event handling\n     */\n  onScrollX () {\n    if (!this.scrollXTicking) {\n      window.requestAnimationFrame(this.scrollX);\n      this.scrollXTicking = true;\n    }\n  }\n\n  onScrollY () {\n    if (!this.scrollYTicking) {\n      window.requestAnimationFrame(this.scrollY);\n      this.scrollYTicking = true;\n    }\n  }\n\n  scrollX () {\n    this.showScrollbar('x');\n    this.positionScrollbar('x');\n    this.scrollXTicking = false;\n  }\n\n  scrollY () {\n    this.showScrollbar('y');\n    this.positionScrollbar('y');\n    this.scrollYTicking = false;\n  }\n\n  onMouseEnter () {\n    this.showScrollbar('x');\n    this.showScrollbar('y');\n  }\n\n  onMouseMove (e) {\n    if (\n      (this.contentEl.clientWidth !== this.contentElWidth) ||\n        (this.contentEl.clientHeight !== this.contentElHeight)\n    ) { this.recalculate(); }\n    const bboxY = this.trackY.getBoundingClientRect();\n    const bboxX = this.trackX.getBoundingClientRect();\n\n    this.mouseX = e.clientX;\n    this.mouseY = e.clientY;\n\n    if (this.isWithinBounds(bboxY)) {\n      this.showScrollbar('y');\n    }\n\n    if (this.isWithinBounds(bboxX)) {\n      this.showScrollbar('x');\n    }\n  }\n\n  /**\n     * Show scrollbar\n     */\n  showScrollbar (axis = 'y') {\n    let scrollbar;\n    const { show } = this.options;\n    // Scrollbar already visible\n    if (this.isVisible[axis]) return;\n\n    if (show && (show !== 'none')) {\n      if ((axis === 'x') && ((show === 'both') || (show === 'x'))) scrollbar = this.scrollbarX;\n      else if ((axis === 'y') && ((show === 'both') || (show === 'y'))) scrollbar = this.scrollbarY;\n    }\n\n    if (this.isEnabled[axis] && scrollbar) {\n      scrollbar.classList.add(this.options.visibleClass);\n      this.isVisible[axis] = true;\n    }\n\n    if (!this.options.autoHide) return;\n\n    window.clearInterval(this.flashTimeout);\n    this.flashTimeout = window.setInterval(this.hideScrollbars, this.options.timeout);\n  }\n\n  /**\n     * Hide Scrollbar\n     */\n  hideScrollbars () {\n    const bboxY = this.trackY.getBoundingClientRect();\n    const bboxX = this.trackX.getBoundingClientRect();\n\n    if (!this.isWithinBounds(bboxY)) {\n      this.scrollbarY.classList.remove(this.options.visibleClass);\n      this.isVisible.y = false;\n    }\n\n    if (!this.isWithinBounds(bboxX)) {\n      this.scrollbarX.classList.remove(this.options.visibleClass);\n      this.isVisible.x = false;\n    }\n  }\n\n  onMouseDown (e) {\n    const bboxY = this.scrollbarY.getBoundingClientRect();\n    const bboxX = this.scrollbarX.getBoundingClientRect();\n\n    if (this.isWithinBounds(bboxY)) {\n      e.preventDefault();\n      this.onDrag(e, 'y');\n    }\n\n    if (this.isWithinBounds(bboxX)) {\n      e.preventDefault();\n      this.onDrag(e, 'x');\n    }\n  }\n\n  /**\n     * on scrollbar handle drag\n     */\n  onDrag (e, axis = 'y') {\n    // Preventing the event's default action stops text being\n    // selectable during the drag.\n    e.preventDefault();\n\n    const scrollbar = axis === 'y' ? this.scrollbarY : this.scrollbarX;\n\n    // Measure how far the user's mouse is from the top of the scrollbar drag handle.\n    const eventOffset = axis === 'y' ? e.pageY : e.pageX;\n\n    this.dragOffset[axis] =\n        eventOffset - scrollbar.getBoundingClientRect()[this.offsetAttr[axis]];\n    this.currentAxis = axis;\n\n    this.el.addEventListener('mousemove', this.drag);\n    this.el.addEventListener('mouseup', this.onEndDrag);\n  }\n\n  /**\n     * Drag scrollbar handle\n     */\n  drag (e) {\n    let eventOffset, track, scrollEl;\n\n    e.preventDefault();\n\n    if (this.currentAxis === 'y') {\n      eventOffset = e.pageY;\n      track = this.trackY;\n      scrollEl = this.scrollContentEl;\n    } else {\n      eventOffset = e.pageX;\n      track = this.trackX;\n      scrollEl = this.contentEl;\n    }\n\n    // Calculate how far the user's mouse is from the top/left of the scrollbar (minus the dragOffset).\n    const dragPos =\n        eventOffset -\n        track.getBoundingClientRect()[this.offsetAttr[this.currentAxis]] -\n        this.dragOffset[this.currentAxis];\n\n    // Convert the mouse position into a percentage of the scrollbar height/width.\n    const dragPerc = dragPos / track[this.sizeAttr[this.currentAxis]];\n\n    // Scroll the content by the same percentage.\n    const scrollPos = dragPerc * this.contentEl[this.scrollSizeAttr[this.currentAxis]];\n\n    scrollEl[this.scrollOffsetAttr[this.currentAxis]] = scrollPos;\n  }\n\n  /**\n     * End scroll handle drag\n     */\n  onEndDrag () {\n    this.el.removeEventListener('mousemove', this.drag);\n    this.el.removeEventListener('mouseup', this.onEndDrag);\n  }\n\n  /**\n     * Check if mouse is within bounds\n     */\n  isWithinBounds (bbox) {\n    return this.mouseX >= bbox.left && this.mouseX <= bbox.left + bbox.width && this.mouseY >= bbox.top && this.mouseY <= bbox.top + bbox.height;\n  }\n}\n"],"names":["events","Symbol","keys","unsubscribe","this","bind","emit","on","removeListener","EventEmitter","eventName","_i","args","callBackCache_1","Set","forEach","eventCallback","has","add","Map","eventCallbackKey","set","_this","event","delete","noop","emitter","options","domElement","privateKeys","optionsKey","domElementKey","mount","unmount","update","App","getType","target","Object","prototype","toString","call","slice","types","Number","arg","String","obj","reduce","classes","className","i","addSpace","Array","fromArray","arr","classString","el","type","classNames","debounce","fn","timeout","timer","clearTimeout","setTimeout","apply","isSSR","window","isType","isObject","getFromBreakPoints","breaks","sorted","map","_break","parseFloat","sort","a","b","find","innerWidth","length","attrs","width","height","empty","getFullElementSize","element","cs","getComputedStyle","sizes","entries","_a","dim","attr","acc","curr","getObjectValue","path","defaultValue","isArray","pathArray","newKey","currChar","charAt","push","key","pop","ALPHABET","ALPHABET_LENGTH","generate","prefix","idLength","lengthId","Math","floor","random","hashID","generateUnique","cache","retries","cacheSet","id","uniqueReties","_retries","console","error","isMap","uaRegex","checkWithMediaQuery","mql","matches","test","navigator","userAgent","isMobile","params","mediaQueryString","onMediaQueryChange","matchMedia","addEventListener","isSet","isSymbol","mergeObjects","sources","accVal","currVal","concat","throttle","inThrottle","setElementAttributes","value","prop","style","portals","portal","open","portalConfig","portalId","_b","tagName","tagAttrs","_c","app","document","getElementById","appElement","createElement","appId","appendChild","_d","AppClass","_e","_f","appInstance","appData","values","close","remove","closeIt","createPortal","component","initData","DEFAULT_OPTIONS","autoHide","show","forceVisible","scrollbarMinSize","scrollbarMaxSize","direction","visibleClass","ScrollbarsHandler","constructor","elements","setOptions","init","initListeners","recalculate","render","resizeScrollbar","positionScrollbar","toggleTrackVisibility","hideNativeScrollbar","onScrollX","onScrollY","scrollX","scrollY","onMouseEnter","onMouseMove","showScrollbar","hideScrollbars","onMouseDown","onDrag","drag","onEndDrag","isWithinBounds","scrollbars","scrollContent","content","trackY","scrollbarY","trackX","scrollbarX","contentEl","scrollContentEl","flashTimeout","dragOffset","x","y","isEnabled","isVisible","scrollOffsetAttr","sizeAttr","scrollSizeAttr","offsetAttr","handleSize","currentAxis","scrollbarWidth","isRtl","offsetSize","contentElWidth","contentElHeight","assign","contentSizeX","contentSizeY","trackXSize","trackYSize","axis","scrollbar","contentSize","trackSize","scrollbarRatio","max","min","scrollOffset","scrollPourcent","handleOffset","transform","track","visibility","body","box","boxStyle","position","top","left","overflow","offsetWidth","clientWidth","removeChild","calcScrollbarWidth","marginBottom","scrollXTicking","requestAnimationFrame","scrollYTicking","e","clientHeight","bboxY","getBoundingClientRect","bboxX","mouseX","clientX","mouseY","clientY","classList","clearInterval","setInterval","preventDefault","eventOffset","pageY","pageX","scrollEl","scrollPos","removeEventListener","bbox"],"mappings":"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"}