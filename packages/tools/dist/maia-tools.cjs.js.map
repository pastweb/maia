{"version":3,"file":"maia-tools.cjs.js","sources":["../src/EventEmitter/EventEmitter.ts","../src/noop/index.ts","../src/App/App.ts","../src/getType/getType.ts","../src/classNames/classNames.ts","../src/isSSR/index.ts","../src/isType/isType.ts","../src/isObject/isObject.ts","../src/getFullElementSize/getFullElementSize.ts","../src/hashID/hashID.ts","../src/isMobile/isMobile.ts","../src/portal/util.ts","../src/portal/portal.ts","../src/ScrollbarsHandler/ScrollbarsHandler.js","../src/portal/createPortal.ts","../src/debounce/debounce.ts","../src/getFromBreakPoints/getFromBreakPoints.ts","../src/getObjectValue/getObjectValue.ts","../src/isMap/isMap.ts","../src/isSet/isSet.ts","../src/isSymbol/isSymbol.ts","../src/mergObjects/mergeObjects.ts","../src/throttle/throttle.ts"],"sourcesContent":["import { EventCallback, EmitterSubscribeObject } from './types';\n\nconst events = Symbol();\nconst keys = Symbol();\nconst unsubscribe = Symbol();\n\nexport class EventEmitter {\n  constructor () {\n    (this as any)[events] = {};\n    (this as any)[keys] = {};\n    (this as any)[unsubscribe] = this[unsubscribe].bind(this);\n    this.emit = this.emit.bind(this);\n    this.on = this.on.bind(this);\n    this.removeListener = this.removeListener.bind(this);\n  }\n\n  emit (eventName: string, ...args: any[]): void {\n    if ((this as any )[events][eventName]) {\n      const callBackCache = new Set();\n      \n      (this as any)[events][eventName].forEach((eventCallback: EventCallback) => {\n        if (!callBackCache.has(eventCallback)) {\n          callBackCache.add(eventCallback);\n          eventCallback(...args);\n        }\n      });\n    }\n  }\n\n  on (eventName: string, eventCallback: EventCallback): EmitterSubscribeObject {\n    if (!(this as any)[events][eventName]) {\n      (this as any)[events][eventName] = new Map();\n    }\n\n    const eventCallbackKey = Symbol();\n    (this as any)[events][eventName].set(eventCallbackKey, eventCallback);\n    (this as any)[keys][eventCallbackKey] = eventName;\n\n    return {\n      eventCallbackKey,\n      removeListener: () => this[unsubscribe](eventName, eventCallbackKey),\n    };\n  }\n\n  removeListener (eventCallbackKey: symbol): void {\n    const event = (this as any)[keys][eventCallbackKey];\n    if (event) {\n      this[unsubscribe](event, eventCallbackKey);\n    }\n  }\n\n  [unsubscribe] (eventName: string, eventCallbackKey: symbol): void {\n    (this as any)[events][eventName].delete(eventCallbackKey);\n    delete (this as any)[keys][eventCallbackKey];\n  }\n}\n","export function noop () {}\n","import { EventEmitter, EventCallback } from '../EventEmitter';\nimport { noop } from '../noop';\nimport { AppOptions, PrivateKeys } from './types';\n\nconst emitter = Symbol();\nconst keys = Symbol();\n\nexport class App {\n  domElement: HTMLElement | undefined;\n  options: AppOptions | undefined;\n  on: (eventName: string, eventCallback: EventCallback) => void;\n  emit: (eventName: string, ...args: any[]) => void;\n  removeListener: (eventCallbackKey: symbol) => void;\n\n  constructor (options: AppOptions = {}, domElement?: HTMLElement, privateKeys: PrivateKeys = {}) {\n    const { optionsKey, domElementKey } = privateKeys;\n    (this as any)[keys] = privateKeys;\n    (this as any)[emitter] = new EventEmitter();\n\n    if (domElementKey) {\n      (this as any)[domElementKey] = domElement;\n    } else {\n      this.domElement = domElement;\n    }\n\n    if (optionsKey) {\n      (this as any)[optionsKey] = options;\n    } else {\n      this.options = options;\n    }\n    \n    this.on = (this as any)[emitter].on;\n    this.emit = (this as any)[emitter].emit;\n    this.removeListener = (this as any)[emitter].removeListener;\n\n    if ((this as any).mount && typeof (this as any).mount === 'function') {\n      (this as any).mount = (this as any).mount.bind(this);\n    } else {\n      (this as any).mount = noop;\n    }\n\n    if ((this as any).unmount && typeof (this as any).unmount === 'function') {\n      (this as any).unmount = (this as any).unmount.bind(this);\n    } else {\n      (this as any).unmount = noop;\n    }\n\n    if ((this as any).update && typeof (this as any).update === 'function') {\n      (this as any).update = (this as any).update.bind(this);\n    } else {\n      (this as any).update = noop;\n    }\n  }\n\n  public setDomElement (domElement: HTMLElement, domElementKey?: symbol): void {\n    if (domElementKey) {\n      (this as any)[domElementKey] = domElement;\n    } else if ((this as any)[keys].domElementKey) {\n      (this as any)[keys].domElementKey = domElement;\n    } else {\n      this.domElement = domElement;\n    }\n  }\n  \n  public setOptions (options: AppOptions, optionsKey?: symbol): void {\n    if (optionsKey) {\n      (this as any)[optionsKey] = options;\n    } else if ((this as any)[keys].optionsKey) {\n      (this as any)[(this as any)[keys].optionsKey] = options;\n    } else {\n      this.options = options;\n    }\n  }\n}\n","/**\n * get target Type.\n * @param target\n * @returns {string}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getType (target: any): string {\n  return Object.prototype.toString.call(target).slice(8, -1);\n}\n","// inspirated to https://github.com/JedWatson/classnames#readme\nimport { getType } from '../getType';\n\nconst types: { [key: string]: any } = {\n  Number: (arg: number): string => `${arg}`,\n  String: (arg: string): string => `${arg}`,\n  Object: (arg: { [key: string]: any }): string => fromObject(arg),\n  Array: (arg: any[]): string => fromArray(arg),\n};\n\nfunction addSpace (i: number): string {\n  return i > 0 ? ' ' : '';\n}\n\nfunction fromObject (obj: { [key: string]: any }): string {\n  return Object.keys(obj).reduce((classes, className, i) => {\n    if (!obj[className]) return classes;\n\n    return `${classes}${addSpace(i)}${className}`;\n  }, '');\n}\n\nfunction fromArray (arr: any[]): string {\n  let classString = null;\n\n  return arr.reduce((classes, el, i) => {\n    const type: string = getType(el);\n\n    if (!types[type]) return classes;\n    classString = types[type](el);\n    if (!classString) return classes;\n\n    return `${classes}${addSpace(i)}${classString}`;\n  }, '');\n}\n\nexport function classNames (...args: any[]): string {\n  return fromArray(args);\n}\n","export const isSSR: boolean = typeof window === 'undefined';\n","import { getType } from '../getType';\n\n/**\n * Type check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isType (type: string, target: any): boolean {\n  return target !== undefined && target !== null && getType(target) === type;\n}\n","import { isType } from '../isType';\n\n/**\n * Simple object check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isObject (target: any): boolean {\n  return isType('Object', target);\n}\n","import { isSSR } from '../isSSR';\nimport { FullElementSize } from './types';\n\nconst attrs = {\n  width: ['width', 'borderLeftWidth', 'marginLeft', 'marginRight', 'borderRightWidth'],\n  height: ['height', 'borderTopWidth', 'marginTop', 'marginBottom', 'borderBottomWidth']\n};\n\nconst empty: FullElementSize = { width: 0, height: 0 };\n\nexport function getFullElementSize(element: HTMLElement | null | undefined): FullElementSize {\n  if (!element) return empty;\n  if (isSSR) return empty;\n\n  const cs = window.getComputedStyle(element);\n  const sizes: FullElementSize = { ...empty };\n\n  Object.entries(attrs).forEach(([dim, attrs]) => {\n    (sizes as any)[dim] = attrs.map(attr => parseFloat((cs as any)[attr]) || 0).reduce((acc, curr) => acc + curr);\n  });\n\n  return sizes;\n}\n","/**\n * The default alphabet is 62 numbers and lower and uppe case letters and numbers.\n * Any numbers that look like letters and vice versa are removed:\n * 1 l, 0 o.\n * Also the following letters are not present, to prevent any\n * expletives: cfhistu\n */\nconst ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\nconst ALPHABET_LENGTH = ALPHABET.length;\n\n// Governs the length of the ID.\n// With an alphabet of 62 chars,\n// a length of 8 gives us 62^8 or\n// 218,340,105,584,896 possibilities.\n// Should be enough...\nconst ID_LENGTH = 8;\n\n/**\n * Governs the number of times we should try to find\n * a unique value before giving up.\n * @type {Number}\n */\nconst UNIQUE_RETRIES = 9999;\n\n/**\n * Returns a randomly-generated friendly ID.\n * Note that the friendly ID is not guaranteed to be\n * unique to any other ID generated by this same method,\n * so it is up to you to check for uniqueness.\n * @return {String} friendly ID.\n */\nfunction generate(prefix?: string, idLength?: number): string {\n  const lengthId = idLength || ID_LENGTH;\n  let key = prefix || '';\n  for (let i = 0; i < lengthId; i++) {\n    key = `${key}${ALPHABET.charAt(Math.floor(Math.random() * ALPHABET_LENGTH))}`;\n  }\n  return key;\n};\n\n/**\n * Tries to generate a unique ID that is not defined in the\n * `cache` array.\n * @param  {Array} cache The list of previous ids to avoid.\n * @return {String} A unique ID, or `null` if one could not be generated.\n */\nfunction generateUnique(cache: string[], prefix?: string, idLength?: number, retries?: number): string {\n  const cacheSet = new Set(cache) || new Set();\n  let id = '';\n  const uniqueReties = retries || UNIQUE_RETRIES;\n\n  // Try to generate a unique ID,\n  // i.e. one that isn't in the cache.\n\n  for (let _retries = 0; _retries < uniqueReties; _retries++) {\n    id = generate(prefix, idLength);\n    \n    if (!cacheSet.has(id)) break;\n\n    if (_retries === uniqueReties) {\n      console.error(`tried ${_retries} times to find a unique ID.`);\n    }\n  }\n\n  return id;\n};\n\nexport const hashID = {\n  generate,\n  generateUnique,\n};\n","import { isSSR } from '../isSSR';\nimport { IisMobile } from './types';\n\nexport const uaRegex = /iP(hone|ad|od)|blackberry|Android|(W|w)indows (P|p)hone/g;\n\nfunction checkWithMediaQuery(mql: MediaQueryListEvent | MediaQueryList): boolean {\n  const { matches } = mql;\n  return uaRegex.test(window.navigator.userAgent) || matches ? true : false;\n}\n\nexport function isMobile(params: IisMobile = {}): boolean {\n  const { isMobile, mediaQueryString, onMediaQueryChange } = params;\n  if (typeof isMobile !== 'undefined') return isMobile;\n  if (isSSR) return false;\n\n  if (!mediaQueryString) {\n    return uaRegex.test(window.navigator.userAgent);\n  }\n\n  function _onMediaQueryChange(event: MediaQueryListEvent): void {\n    const isMobile = checkWithMediaQuery(event);\n\n    if (onMediaQueryChange) {\n      onMediaQueryChange({...event, isMobile });\n    }\n  }\n\n  const mql: MediaQueryList = window.matchMedia(mediaQueryString);\n\n  if (onMediaQueryChange) {\n    mql.addEventListener('change', _onMediaQueryChange);\n  }\n\n  return checkWithMediaQuery(mql);\n}\n","import { hashID } from '../hashID';\nimport {\n  Portals,\n  OpenPortalConfig,\n  UpdatePortalConfig,\n  ClosePortalConfig,\n  HTMLElementAttrs,\n  StyleConfig\n} from './types';\nimport { App } from '../App';\n\nexport function setElementAttributes (element: HTMLElement | null, attrs: HTMLElementAttrs): void {\n  if (!element) return;\n  Object.entries(attrs).forEach(([attr, value]: [string, string | StyleConfig]) => {\n    if (attr === 'style') {\n      Object.entries(value).forEach(([prop, value]: [string, string]) => {\n        (element.style as any)[prop] = `${value}`;\n      });\n    } else {\n      (element as any)[attr] = `${value}`;\n    }\n  });\n}\n\nexport function open (portals: Portals, { portalId, tagName = 'div', tagAttrs, app = {} }: OpenPortalConfig): string | false {\n  const portal = document.getElementById(portalId);\n  \n  if (!portal) return false;\n  \n  const appElement = document.createElement(tagName);\n  \n  if (tagAttrs) setElementAttributes(appElement, tagAttrs);\n  if (!portals[portalId]) portals[portalId] = {};\n  \n  const appId = hashID.generateUnique(Object.keys(portals[portalId]));\n  appElement.id = appId;\n  portal.appendChild(appElement);\n  \n  const {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    AppClass = class { mount(){} },\n    options = {},\n    privateKeys = {},\n  } = app;\n\n  const appInstance = new AppClass({ portalId, appId, ...options }, appElement, privateKeys);\n  portals[portalId][appId] = appInstance;\n  appInstance.mount();\n  \n  return appId;\n}\n\nexport function update (portals: Portals, { portalId, appId, tagAttrs, appData }: UpdatePortalConfig): boolean {\n  if (!portals[portalId] || (appId !== '*' && !portals[portalId][appId])) return false;\n\n  if (tagAttrs) setElementAttributes(document.getElementById(appId), tagAttrs);\n  \n  if (appData) {\n    if (appId === '*') {\n      Object.values(portals[portalId]).forEach((app: App) => (app as any).update(appData));\n    } else {\n      (portals[portalId][appId] as any).update(appData);\n    }\n  }\n\n  return true;\n}\n\nexport function close (portals: Portals, { portalId, appId }: ClosePortalConfig): boolean {\n  if (!portals[portalId] || (appId !== '*' && !portals[portalId][appId])) return false;\n  \n  function closeIt ({ portalId, appId }: ClosePortalConfig) {\n    (portals[portalId][appId] as any).unmount();\n    delete portals[portalId][appId];\n    const element: HTMLElement | null = document.getElementById(appId);\n    if (element) {\n      element.remove();\n    }\n    return true;\n  }\n  \n  if (appId === '*') {\n    Object.keys(portals[portalId]).forEach(appId => portals[portalId][appId].emit('mustUnmount'));\n  }\n\n  return closeIt({ portalId, appId });\n}\n","import { open, close, update } from './util';\nimport { Portal, Portals, OpenPortalConfig, UpdatePortalConfig, ClosePortalConfig } from './types';\n\nexport const portals: Portals = {};\n\nexport const portal: Portal = {\n  open: (portalConfig: OpenPortalConfig): string | false => open(portals, portalConfig),\n  update: (portalConfig: UpdatePortalConfig): boolean => update(portals, portalConfig),\n  close: (portalConfig: ClosePortalConfig): boolean => close(portals, portalConfig),\n};\n","// inspirated to https://github.com/Grsmto/simplebar\n\nfunction calcScrollbarWidth() {\n  if (!document) return 0;\n  const body = document.body;\n  const box = document.createElement('div');\n  const boxStyle = box.style;\n\n  boxStyle.position = 'absolute';\n  boxStyle.top = boxStyle.left = '-9999px';\n  boxStyle.width = boxStyle.height = '100px';\n  boxStyle.overflow = 'scroll';\n\n  body.appendChild(box);\n  const width = box.offsetWidth - box.clientWidth;\n  body.removeChild(box);\n  return width;\n};\n\nconst DEFAULT_OPTIONS = {\n  autoHide: true,\n  show: 'both',\n  forceVisible: false,\n  scrollbarMinSize: 25,\n  scrollbarMaxSize: 0,\n  direction: 'ltr',\n  timeout: 1000,\n  visibleClass: 'visible'\n};\n\nexport class ScrollbarsHandler {\n  constructor (elements, options) {\n    this.setOptions = this.setOptions.bind(this);\n    this.init = this.init.bind(this);\n    this.initListeners = this.initListeners.bind(this);\n    this.recalculate = this.recalculate.bind(this);\n    this.render = this.render.bind(this);\n    this.resizeScrollbar = this.resizeScrollbar.bind(this);\n    this.positionScrollbar = this.positionScrollbar.bind(this);\n    this.toggleTrackVisibility = this.toggleTrackVisibility.bind(this);\n    this.hideNativeScrollbar = this.hideNativeScrollbar.bind(this);\n    this.onScrollX = this.onScrollX.bind(this);\n    this.onScrollY = this.onScrollY.bind(this);\n    this.scrollX = this.scrollX.bind(this);\n    this.scrollY = this.scrollY.bind(this);\n    this.onMouseEnter = this.onMouseEnter.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.showScrollbar = this.showScrollbar.bind(this);\n    this.hideScrollbars = this.hideScrollbars.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onDrag = this.onDrag.bind(this);\n    this.drag = this.drag.bind(this);\n    this.onEndDrag = this.onEndDrag.bind(this);\n    this.isWithinBounds = this.isWithinBounds.bind(this);\n\n    const {\n      scrollbars,\n      scrollContent,\n      content,\n      trackY,\n      scrollbarY,\n      trackX,\n      scrollbarX\n    } = elements;\n\n    this.el = scrollbars;\n    this.contentEl = content;\n    this.scrollContentEl = scrollContent;\n    this.trackX = trackX;\n    this.scrollbarX = scrollbarX;\n    this.trackY = trackY;\n    this.scrollbarY = scrollbarY;\n\n    this.flashTimeout = null;\n    this.dragOffset = { x: 0, y: 0 };\n    this.isEnabled = { x: true, y: true };\n    this.isVisible = { x: false, y: false };\n    this.scrollOffsetAttr = { x: 'scrollLeft', y: 'scrollTop' };\n    this.sizeAttr = { x: 'offsetWidth', y: 'offsetHeight' };\n    this.scrollSizeAttr = { x: 'scrollWidth', y: 'scrollHeight' };\n    this.offsetAttr = { x: 'left', y: 'top' };\n    this.handleSize = { x: 0, y: 0 };\n\n    this.currentAxis = null;\n    this.scrollbarWidth = null;\n    this.options = { ...DEFAULT_OPTIONS, options };\n    this.isRtl = this.options.direction === 'rtl';\n    this.offsetSize = 20;\n\n    this.contentElWidth = null;\n    this.contentElHeight = null;\n\n    this.init();\n  }\n\n  setOptions (options) {\n    this.options = Object.assign(this.options, options);\n    this.recalculate();\n  }\n\n  init () {\n    // We stop here on server-side\n    if (window) {\n      // Calculate content size\n      this.hideNativeScrollbar();\n      this.render();\n      this.recalculate();\n      this.initListeners();\n    }\n  }\n\n  initListeners () {\n    // Event listeners\n    if (this.options.autoHide) {\n      this.el.addEventListener('mouseenter', this.onMouseEnter);\n    }\n\n    this.el.addEventListener('mousedown', this.onMouseDown);\n    this.el.addEventListener('mousemove', this.onMouseMove);\n\n    this.contentEl.addEventListener('scroll', this.onScrollX);\n    this.scrollContentEl.addEventListener('scroll', this.onScrollY);\n\n    // Browser zoom triggers a window resize\n    // window.addEventListener('resize', this.onWindowResize);\n  }\n\n  /**\n     * Recalculate scrollbar\n     */\n  recalculate () { this.render(); }\n\n  render () {\n    this.contentSizeX = this.contentEl[this.scrollSizeAttr.x];\n    this.contentSizeY = this.contentEl[this.scrollSizeAttr.y] - (this.scrollbarWidth || this.offsetSize);\n    this.trackXSize = this.trackX[this.sizeAttr.x];\n    this.trackYSize = this.trackY[this.sizeAttr.y];\n\n    // Set isEnabled to false if scrollbar is not necessary (content is shorter than wrapper)\n    this.isEnabled.x = this.trackXSize < this.contentSizeX;\n    this.isEnabled.y = this.trackYSize < this.contentSizeY;\n\n    this.resizeScrollbar('x');\n    this.resizeScrollbar('y');\n\n    this.positionScrollbar('x');\n    this.positionScrollbar('y');\n\n    this.toggleTrackVisibility('x');\n    this.toggleTrackVisibility('y');\n  }\n\n  /**\n     * Resize scrollbar\n     */\n  resizeScrollbar (axis = 'y') {\n    let scrollbar;\n    let contentSize;\n    let trackSize;\n\n    if (!this.isEnabled[axis] && !this.options.forceVisible) return;\n\n    if (axis === 'x') {\n      scrollbar = this.scrollbarX;\n      contentSize = this.contentSizeX;\n      trackSize = this.trackXSize;\n    } else {\n      // 'y'\n      scrollbar = this.scrollbarY;\n      contentSize = this.contentSizeY;\n      trackSize = this.trackYSize;\n    }\n\n    const scrollbarRatio = trackSize / contentSize;\n\n    // Calculate new height/position of drag handle.\n    this.handleSize[axis] = Math.max(\n      (scrollbarRatio * trackSize),\n      this.options.scrollbarMinSize\n    );\n\n    if (this.options.scrollbarMaxSize) {\n      this.handleSize[axis] = Math.min(\n        this.handleSize[axis],\n        this.options.scrollbarMaxSize\n      );\n    }\n\n    if (axis === 'x') {\n      scrollbar.style.width = `${this.handleSize[axis]}px`;\n    } else {\n      scrollbar.style.height = `${this.handleSize[axis]}px`;\n    }\n  }\n\n  positionScrollbar (axis = 'y') {\n    let scrollbar;\n    let scrollOffset;\n    let contentSize;\n    let trackSize;\n\n    if (axis === 'x') {\n      scrollbar = this.scrollbarX;\n      scrollOffset = this.contentEl[this.scrollOffsetAttr[axis]]; // Either scrollTop() or scrollLeft().\n      contentSize = this.contentSizeX;\n      trackSize = this.trackXSize;\n    } else {\n      // 'y'\n      scrollbar = this.scrollbarY;\n      scrollOffset = this.scrollContentEl[this.scrollOffsetAttr[axis]]; // Either scrollTop() or scrollLeft().\n      contentSize = this.contentSizeY;\n      trackSize = this.trackYSize;\n    }\n\n    const scrollPourcent = scrollOffset / (contentSize - trackSize);\n    const handleOffset = ((trackSize - this.handleSize[axis]) * scrollPourcent);\n\n    if (this.isEnabled[axis] || this.options.forceVisible) {\n      if (axis === 'x') {\n        scrollbar.style.transform = `translate3d(${handleOffset}px, 0, 0)`;\n      } else {\n        scrollbar.style.transform = `translate3d(0, ${handleOffset}px, 0)`;\n      }\n    }\n  }\n\n  toggleTrackVisibility (axis = 'y') {\n    const track = axis === 'y' ? this.trackY : this.trackX;\n    const scrollbar = axis === 'y' ? this.scrollbarY : this.scrollbarX;\n\n    if (this.isEnabled[axis] || this.options.forceVisible) {\n      track.style.visibility = 'visible';\n    } else {\n      track.style.visibility = 'hidden';\n    }\n\n    // Even if forceVisible is enabled, scrollbar itself should be hidden\n    if (this.options.forceVisible) {\n      if (this.isEnabled[axis]) {\n        scrollbar.style.visibility = 'visible';\n      } else {\n        scrollbar.style.visibility = 'hidden';\n      }\n    }\n  }\n\n  hideNativeScrollbar () {\n    // Recalculate scrollbarWidth in case it's a zoom\n    this.scrollbarWidth = calcScrollbarWidth();\n\n    this.scrollContentEl.style[this.isRtl ? 'paddingLeft' : 'paddingRight'] = `${this.scrollbarWidth || this.offsetSize}px`;\n    this.scrollContentEl.style.marginBottom = `-${this.scrollbarWidth * 2 || this.offsetSize}px`;\n    // this.contentEl.style.paddingBottom = `${this.scrollbarWidth || this.offsetSize}px`\n\n    if (this.scrollbarWidth !== 0) {\n      this.contentEl.style[this.isRtl ? 'marginLeft' : 'marginRight'] = `-${this.scrollbarWidth}px`;\n    }\n  }\n\n  /**\n     * On scroll event handling\n     */\n  onScrollX () {\n    if (!this.scrollXTicking) {\n      window.requestAnimationFrame(this.scrollX);\n      this.scrollXTicking = true;\n    }\n  }\n\n  onScrollY () {\n    if (!this.scrollYTicking) {\n      window.requestAnimationFrame(this.scrollY);\n      this.scrollYTicking = true;\n    }\n  }\n\n  scrollX () {\n    this.showScrollbar('x');\n    this.positionScrollbar('x');\n    this.scrollXTicking = false;\n  }\n\n  scrollY () {\n    this.showScrollbar('y');\n    this.positionScrollbar('y');\n    this.scrollYTicking = false;\n  }\n\n  onMouseEnter () {\n    this.showScrollbar('x');\n    this.showScrollbar('y');\n  }\n\n  onMouseMove (e) {\n    if (\n      (this.contentEl.clientWidth !== this.contentElWidth) ||\n        (this.contentEl.clientHeight !== this.contentElHeight)\n    ) { this.recalculate(); }\n    const bboxY = this.trackY.getBoundingClientRect();\n    const bboxX = this.trackX.getBoundingClientRect();\n\n    this.mouseX = e.clientX;\n    this.mouseY = e.clientY;\n\n    if (this.isWithinBounds(bboxY)) {\n      this.showScrollbar('y');\n    }\n\n    if (this.isWithinBounds(bboxX)) {\n      this.showScrollbar('x');\n    }\n  }\n\n  /**\n     * Show scrollbar\n     */\n  showScrollbar (axis = 'y') {\n    let scrollbar;\n    const { show } = this.options;\n    // Scrollbar already visible\n    if (this.isVisible[axis]) return;\n\n    if (show && (show !== 'none')) {\n      if ((axis === 'x') && ((show === 'both') || (show === 'x'))) scrollbar = this.scrollbarX;\n      else if ((axis === 'y') && ((show === 'both') || (show === 'y'))) scrollbar = this.scrollbarY;\n    }\n\n    if (this.isEnabled[axis] && scrollbar) {\n      scrollbar.classList.add(this.options.visibleClass);\n      this.isVisible[axis] = true;\n    }\n\n    if (!this.options.autoHide) return;\n\n    window.clearInterval(this.flashTimeout);\n    this.flashTimeout = window.setInterval(this.hideScrollbars, this.options.timeout);\n  }\n\n  /**\n     * Hide Scrollbar\n     */\n  hideScrollbars () {\n    const bboxY = this.trackY.getBoundingClientRect();\n    const bboxX = this.trackX.getBoundingClientRect();\n\n    if (!this.isWithinBounds(bboxY)) {\n      this.scrollbarY.classList.remove(this.options.visibleClass);\n      this.isVisible.y = false;\n    }\n\n    if (!this.isWithinBounds(bboxX)) {\n      this.scrollbarX.classList.remove(this.options.visibleClass);\n      this.isVisible.x = false;\n    }\n  }\n\n  onMouseDown (e) {\n    const bboxY = this.scrollbarY.getBoundingClientRect();\n    const bboxX = this.scrollbarX.getBoundingClientRect();\n\n    if (this.isWithinBounds(bboxY)) {\n      e.preventDefault();\n      this.onDrag(e, 'y');\n    }\n\n    if (this.isWithinBounds(bboxX)) {\n      e.preventDefault();\n      this.onDrag(e, 'x');\n    }\n  }\n\n  /**\n     * on scrollbar handle drag\n     */\n  onDrag (e, axis = 'y') {\n    // Preventing the event's default action stops text being\n    // selectable during the drag.\n    e.preventDefault();\n\n    const scrollbar = axis === 'y' ? this.scrollbarY : this.scrollbarX;\n\n    // Measure how far the user's mouse is from the top of the scrollbar drag handle.\n    const eventOffset = axis === 'y' ? e.pageY : e.pageX;\n\n    this.dragOffset[axis] =\n        eventOffset - scrollbar.getBoundingClientRect()[this.offsetAttr[axis]];\n    this.currentAxis = axis;\n\n    this.el.addEventListener('mousemove', this.drag);\n    this.el.addEventListener('mouseup', this.onEndDrag);\n  }\n\n  /**\n     * Drag scrollbar handle\n     */\n  drag (e) {\n    let eventOffset, track, scrollEl;\n\n    e.preventDefault();\n\n    if (this.currentAxis === 'y') {\n      eventOffset = e.pageY;\n      track = this.trackY;\n      scrollEl = this.scrollContentEl;\n    } else {\n      eventOffset = e.pageX;\n      track = this.trackX;\n      scrollEl = this.contentEl;\n    }\n\n    // Calculate how far the user's mouse is from the top/left of the scrollbar (minus the dragOffset).\n    const dragPos =\n        eventOffset -\n        track.getBoundingClientRect()[this.offsetAttr[this.currentAxis]] -\n        this.dragOffset[this.currentAxis];\n\n    // Convert the mouse position into a percentage of the scrollbar height/width.\n    const dragPerc = dragPos / track[this.sizeAttr[this.currentAxis]];\n\n    // Scroll the content by the same percentage.\n    const scrollPos = dragPerc * this.contentEl[this.scrollSizeAttr[this.currentAxis]];\n\n    scrollEl[this.scrollOffsetAttr[this.currentAxis]] = scrollPos;\n  }\n\n  /**\n     * End scroll handle drag\n     */\n  onEndDrag () {\n    this.el.removeEventListener('mousemove', this.drag);\n    this.el.removeEventListener('mouseup', this.onEndDrag);\n  }\n\n  /**\n     * Check if mouse is within bounds\n     */\n  isWithinBounds (bbox) {\n    return this.mouseX >= bbox.left && this.mouseX <= bbox.left + bbox.width && this.mouseY >= bbox.top && this.mouseY <= bbox.top + bbox.height;\n  }\n}\n","import { portal } from './portal';\nimport { CreatedPortal, CreatePortalConfig, HTMLElementAttrs } from './types';\n\nexport function createPortal ({ portalId, tagName, tagAttrs, app = {} }: CreatePortalConfig): CreatedPortal {\n  app.options = app.options || {};\n  return {\n    open: (component: any, initData?: { [key: string]: any }): string | false => portal.open({\n        portalId,\n        tagName,\n        tagAttrs,\n        app: {\n          ...app,\n          options: {\n            ...app.options,\n            portal,\n            component,\n            initData,\n          },\n        }\n    }),\n    update: (appId: string, appData?: any, tagAttrs?: HTMLElementAttrs): boolean => {\n      return portal.update({ portalId, appId, appData, tagAttrs });\n    },\n    close: (appId: string): boolean => portal.close({ portalId, appId }),\n  };\n}\n","export type DebouceCallback = (...args: any[]) => any;\n\nexport function debounce (fn: DebouceCallback, timeout = 300): DebouceCallback {\n  let timer : any;\n\n  return (...args: any[]) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => { fn.apply(this, args); }, timeout);\n  };\n}\n","import { isSSR } from '../isSSR';\nimport { isObject } from '../isObject';\nimport { BreakPointsConfig } from './types';\n\n/**\n * Given a config Object like:\n * const breaks = {\n *      0: 'phone',\n *      450: 'tablet',\n *      1025: 'desktop'\n *  }\n * @return {false|Any} break value.\n */\n\nexport function getFromBreakPoints(breaks: BreakPointsConfig): boolean | any {\n  if (isSSR) return false;\n  if (!isObject(breaks)) return false;\n\n  const sorted = Object.keys(breaks)\n    .map((_break: string) => parseFloat(_break))\n    .sort((a, b) => a - b);\n\n  const _break: number = sorted.find((_break: number) => _break >= window.innerWidth) || sorted[sorted.length - 1 ];\n  return breaks[_break];\n}\n","// inspirated to lodash.get\nimport { isObject } from '../isObject';\nimport { ObjectValue, DefaultValue } from './types';\n\nexport function getObjectValue (target: ObjectValue, path: string | string[], defaultValue: DefaultValue = null): any {\n  if (!isObject(target)) {\n    return defaultValue;\n  }\n\n  if (!Array.isArray(path) && typeof path !== 'string') {\n    return defaultValue;\n  }\n\n  let pathArray = [];\n\n  if (!Array.isArray(path)) {\n    let newKey = '';\n    let currChar = '';\n    for(let i=path.length -1; i>=0; i--) {\n      currChar = path.charAt(i);\n      \n      if (currChar !== '.') {\n        newKey = `${currChar}${newKey}`;\n        if (i === 0) pathArray.push(newKey);\n      } else {\n        pathArray.push(newKey);\n        newKey = '';\n      }\n    }\n  } else {\n    pathArray = path;\n  }\n\n  const key = pathArray.pop();\n\n  if (typeof key !== 'string') {\n    return defaultValue;\n  }\n\n  if (!pathArray.length && target[key]) {\n    return target[key];\n  }\n\n  if (target[key] && isObject(target[key])) {\n    return getObjectValue(target[key], pathArray, defaultValue);\n  }\n\n  return defaultValue;\n}\n","import { isType } from '../isType';\n\n/**\n * Simple Map check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isMap (target: any): boolean {\n  return isType('Map', target);\n}\n","import { isType } from '../isType';\n\n/**\n * Simple Set check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isSet (target: any): boolean {\n  return isType('Set', target);\n}\n","import { isType } from '../isType';\n\n/**\n * Simple Symbol check.\n * @param target\n * @returns {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function isSymbol (target: any): boolean {\n  return isType('Symbol', target);\n}\n","import { isObject } from '../isObject';\n/**\n * Deep merge two or more objects.\n * @param target\n * @param ...sources\n */\n\nexport function mergeObjects(...sources: { [key: string]: any }[]): { [key: string]: any } {\n  if (!sources.length) return {};\n  return sources.reduce((acc, curr) => {\n    if (isObject(curr)) {\n      Object.keys(curr).forEach(key => {\n        const accVal = acc[key];\n        const currVal = curr[key];\n        \n        if (Array.isArray(accVal) && Array.isArray(currVal)) {\n          acc[key] = accVal.concat(...currVal);\n        }\n        else if (isObject(accVal) && isObject(currVal)) {\n          acc[key] = mergeObjects(accVal, currVal);\n        }\n        else {\n          acc[key] = currVal;\n        }\n      });\n    }\n    \n    return acc;\n  }, {});\n}\n","export type ThrottleCallback = (...args: any[]) => any;\n\nexport function throttle (fn: ThrottleCallback, timeout = 300): ThrottleCallback {\n  let inThrottle: boolean;\n\n  return (...args) => {\n    if (inThrottle) return;\n\n    fn.apply(this, args);\n    inThrottle = true;\n    setTimeout(() => { inThrottle = false; }, timeout);\n  };\n}\n"],"names":["events","Symbol","keys","unsubscribe","this","bind","emit","on","removeListener","EventEmitter","eventName","_i","args","callBackCache_1","Set","forEach","eventCallback","has","add","Map","eventCallbackKey","set","_this","event","delete","noop","emitter","options","domElement","privateKeys","optionsKey","domElementKey","mount","unmount","update","App","getType","target","Object","prototype","toString","call","slice","types","Number","arg","String","obj","reduce","classes","className","i","addSpace","Array","fromArray","arr","classString","el","type","isSSR","window","isType","isObject","attrs","width","height","empty","ALPHABET","ALPHABET_LENGTH","length","generate","prefix","idLength","lengthId","key","charAt","Math","floor","random","hashID","generateUnique","cache","retries","cacheSet","id","uniqueReties","_retries","console","error","uaRegex","checkWithMediaQuery","mql","matches","test","navigator","userAgent","setElementAttributes","element","entries","_a","attr","value","prop","style","portals","portal","open","portalConfig","portalId","_b","tagName","tagAttrs","_c","app","document","getElementById","appElement","createElement","appId","appendChild","_d","AppClass","_e","_f","appInstance","appData","values","close","remove","closeIt","DEFAULT_OPTIONS","autoHide","show","forceVisible","scrollbarMinSize","scrollbarMaxSize","direction","timeout","visibleClass","constructor","elements","setOptions","init","initListeners","recalculate","render","resizeScrollbar","positionScrollbar","toggleTrackVisibility","hideNativeScrollbar","onScrollX","onScrollY","scrollX","scrollY","onMouseEnter","onMouseMove","showScrollbar","hideScrollbars","onMouseDown","onDrag","drag","onEndDrag","isWithinBounds","scrollbars","scrollContent","content","trackY","scrollbarY","trackX","scrollbarX","contentEl","scrollContentEl","flashTimeout","dragOffset","x","y","isEnabled","isVisible","scrollOffsetAttr","sizeAttr","scrollSizeAttr","offsetAttr","handleSize","currentAxis","scrollbarWidth","isRtl","offsetSize","contentElWidth","contentElHeight","assign","addEventListener","contentSizeX","contentSizeY","trackXSize","trackYSize","axis","scrollbar","contentSize","trackSize","scrollbarRatio","max","min","scrollOffset","scrollPourcent","handleOffset","transform","track","visibility","body","box","boxStyle","position","top","left","overflow","offsetWidth","clientWidth","removeChild","calcScrollbarWidth","marginBottom","scrollXTicking","requestAnimationFrame","scrollYTicking","e","clientHeight","bboxY","getBoundingClientRect","bboxX","mouseX","clientX","mouseY","clientY","classList","clearInterval","setInterval","preventDefault","eventOffset","pageY","pageX","scrollEl","scrollPos","removeEventListener","bbox","component","initData","fn","timer","clearTimeout","setTimeout","apply","breaks","sorted","map","_break","parseFloat","sort","a","b","find","innerWidth","cs","getComputedStyle","sizes","dim","acc","curr","getObjectValue","path","defaultValue","isArray","pathArray","newKey","currChar","push","pop","params","isMobile","mediaQueryString","onMediaQueryChange","matchMedia","mergeObjects","sources","accVal","currVal","concat","inThrottle"],"mappings":"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"}