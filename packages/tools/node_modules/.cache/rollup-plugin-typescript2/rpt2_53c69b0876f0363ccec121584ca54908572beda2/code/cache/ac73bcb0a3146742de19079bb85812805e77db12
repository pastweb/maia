{"code":"var events = Symbol();\r\nvar keys = Symbol();\r\nvar unsubscribe = Symbol();\r\nvar EventEmitter = (function () {\r\n    function EventEmitter() {\r\n        this[events] = {};\r\n        this[keys] = {};\r\n        this[unsubscribe] = this[unsubscribe].bind(this);\r\n        this.emit = this.emit.bind(this);\r\n        this.on = this.on.bind(this);\r\n        this.removeListener = this.removeListener.bind(this);\r\n    }\r\n    EventEmitter.prototype.emit = function (eventName) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (this[events][eventName]) {\r\n            var callBackCache_1 = new Set();\r\n            this[events][eventName].forEach(function (eventCallback) {\r\n                if (!callBackCache_1.has(eventCallback)) {\r\n                    callBackCache_1.add(eventCallback);\r\n                    eventCallback.apply(void 0, args);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    EventEmitter.prototype.on = function (eventName, eventCallback) {\r\n        var _this = this;\r\n        if (!this[events][eventName]) {\r\n            this[events][eventName] = new Map();\r\n        }\r\n        var eventCallbackKey = Symbol();\r\n        this[events][eventName].set(eventCallbackKey, eventCallback);\r\n        this[keys][eventCallbackKey] = eventName;\r\n        return {\r\n            eventCallbackKey: eventCallbackKey,\r\n            removeListener: function () { return _this[unsubscribe](eventName, eventCallbackKey); },\r\n        };\r\n    };\r\n    EventEmitter.prototype.removeListener = function (eventCallbackKey) {\r\n        var event = this[keys][eventCallbackKey];\r\n        if (event) {\r\n            this[unsubscribe](event, eventCallbackKey);\r\n        }\r\n    };\r\n    EventEmitter.prototype[unsubscribe] = function (eventName, eventCallbackKey) {\r\n        this[events][eventName].delete(eventCallbackKey);\r\n        delete this[keys][eventCallbackKey];\r\n    };\r\n    return EventEmitter;\r\n}());\r\nexport { EventEmitter };\r\n//# sourceMappingURL=EventEmitter.js.map","references":["/Users/nico/Projects/maia/@maia/packages/tools/src/EventEmitter/types.ts"],"map":"{\"version\":3,\"file\":\"EventEmitter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/EventEmitter/EventEmitter.ts\"],\"names\":[],\"mappings\":\"AAEA,IAAM,MAAM,GAAG,MAAM,EAAE,CAAC;AACxB,IAAM,IAAI,GAAG,MAAM,EAAE,CAAC;AACtB,IAAM,WAAW,GAAG,MAAM,EAAE,CAAC;AAE7B;IACE;QACG,IAAY,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;QAC1B,IAAY,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QACxB,IAAY,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvD,CAAC;IAED,2BAAI,GAAJ,UAAM,SAAiB;QAAE,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,6BAAc;;QACrC,IAAK,IAAa,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,EAAE;YACrC,IAAM,eAAa,GAAG,IAAI,GAAG,EAAE,CAAC;YAE/B,IAAY,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,aAA4B;gBACpE,IAAI,CAAC,eAAa,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE;oBACrC,eAAa,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;oBACjC,aAAa,eAAI,IAAI,EAAE;iBACxB;YACH,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,yBAAE,GAAF,UAAI,SAAiB,EAAE,aAA4B;QAAnD,iBAaC;QAZC,IAAI,CAAE,IAAY,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,EAAE;YACpC,IAAY,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;SAC9C;QAED,IAAM,gBAAgB,GAAG,MAAM,EAAE,CAAC;QACjC,IAAY,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,gBAAgB,EAAE,aAAa,CAAC,CAAC;QACrE,IAAY,CAAC,IAAI,CAAC,CAAC,gBAAgB,CAAC,GAAG,SAAS,CAAC;QAElD,OAAO;YACL,gBAAgB,kBAAA;YAChB,cAAc,EAAE,cAAM,OAAA,KAAI,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE,gBAAgB,CAAC,EAA9C,CAA8C;SACrE,CAAC;IACJ,CAAC;IAED,qCAAc,GAAd,UAAgB,gBAAwB;QACtC,IAAM,KAAK,GAAI,IAAY,CAAC,IAAI,CAAC,CAAC,gBAAgB,CAAC,CAAC;QACpD,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;SAC5C;IACH,CAAC;IAED,uBAAC,WAAW,CAAC,GAAb,UAAe,SAAiB,EAAE,gBAAwB;QACvD,IAAY,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;QAC1D,OAAQ,IAAY,CAAC,IAAI,CAAC,CAAC,gBAAgB,CAAC,CAAC;IAC/C,CAAC;IACH,mBAAC;AAAD,CAAC,AAjDD,IAiDC\"}","dts":{"name":"/Users/nico/Projects/maia/@maia/packages/tools/dist/types/EventEmitter/EventEmitter.d.ts","writeByteOrderMark":false,"text":"import { EventCallback, EmitterSubscribeObject } from './types';\r\ndeclare const unsubscribe: unique symbol;\r\nexport declare class EventEmitter {\r\n    constructor();\r\n    emit(eventName: string, ...args: any[]): void;\r\n    on(eventName: string, eventCallback: EventCallback): EmitterSubscribeObject;\r\n    removeListener(eventCallbackKey: symbol): void;\r\n    [unsubscribe](eventName: string, eventCallbackKey: symbol): void;\r\n}\r\nexport {};\r\n"}}
